package controller;

import java.util.Random;

import model.Enemy;

import org.json.simple.JSONObject;

public class LevelFactory {
	
	public JSONObject buildLevel(int userID, int level){
		Random rand = new Random();
		JSONObject objLevel = new JSONObject();
		
		int numEnemies = 10 + (level - 1) * 7;
		int randomNum[] = new int[level];
		Enemy enemies[] = new Enemy[level];
		JSONObject enemiesObj[] = new JSONObject[level];
		
		randomNum[0] = numEnemies;
		for(int i = randomNum.length - 1; i > 0; i--){
			randomNum[i] = rand.nextInt(randomNum[0]) + 1;
			randomNum[0] = numEnemies - randomNum[i];
		}
		
		for(int i = 0 ; i < enemies.length; i++){
			enemies[i] = new Enemy(i+1, i+1, 700 - (i+1) * 200, i+1);
		}
		
		for(int i = 0 ; i < enemiesObj.length; i++){
			enemiesObj[i].put("type", enemies[i].getType());
			enemiesObj[i].put("health", enemies[i].getHealth());
			enemiesObj[i].put("duration", enemies[i].getDuration());
			enemiesObj[i].put("damage", enemies[i].getDamage());
			enemiesObj[i].put("count", randomNum[i]);
		}
		
		return objLevel;
	}

}
